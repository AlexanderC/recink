language: node_js
git:
  depth: 1
cache:
  bundler: true
  directories:
    - node_modules
    - '$(npm root -g)'
    - '$(npm config get prefix)/bin'
branches:
  only:
    - master
    - dev
    - stage
    - test
script: 'cd example && $SCRIPT'
matrix:
  include:
    -
      node_js: 6
      before_install:
        - 'npm install -g recink'
      env: 'SCRIPT="recink run unit"'
    -
      node_js: 8
      before_install:
        - 'npm install -g recink'
        - 'npm install -g recink-codeclimate'
      env: 'SCRIPT="recink run unit -c recink-codeclimate"'
    -
      node_js: 8
      env: 'SCRIPT="recink run e2e"'
      addons:
        apt:
          packages:
            - xvfb
      install:
        - 'export DISPLAY='':99.0'''
        - 'Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &'
env:
  global:
    -
      secure: CNiDJs1EWJP/oAQlWU53MHwMZRY9Ho80uT3h9FLBaZw3hYQJEko/hUtcn6UNBGoz6N7dEv7/R4qb9vFDmsHFAcvah4telqfZWtVffrmffJjbehK2g/oCPVstWvYsN63KNX4KF1Pa0MyN/xx54oyI9Gm201jwFz7SeFL6Q6kn6ybBY+2AsVukKlPpF+wI7WOBVUmKc8kOrBlcTy5zlAq7x8DdNnyb2nSgHBb9xfssll1EXFDYOLaiBmvBLmrFNZ+/WZqkKmCiWHLfx2EIKvJ3Qg+D2EINPXHbrUvian1AjIJk3UWETN2sTHu9NBqeohacgMlvCo8piMNXrCAs2hytN4yPPYSXugiyyxuBeGP6Q3dwUer8plastncCb2iOT4gvBM66S/W+iHDt8avy4z5ScNn1rCtFJINaTKmvy8TjZjDNfvdolYnen4IYQdyBTKXXP5gFXuOx8Ff02LiilBJq7z2PcI5vifqOFATaIHm5KcsYPi79HZErFYcfGNlrCqbFHhf5Efobwk0U9KUyrO1noFydM92cn07ahj4i0OfOMHZoMpB+P6fZb2ShEcoUvgXNJiLKIOiob/PxwhdRf95pKRV+b/hiyvux9Go8b6S8mbmywpnpEqtcjvzuvEu8swuf57pcJvrRyFdVpmaBy0m8yPFC/c7YjVECW6hZz5r4Tk4=
